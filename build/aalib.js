/*!
 * The MIT License (MIT)
 * 
 * Copyright (c) 2015 mirz <mirz.hq@gmail.com>
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.aalib=n():t.aalib=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";t.exports={read:{image:e(1),video:e(33)},filter:{linear:e(44),brightness:e(45),contrast:e(46),inverse:e(47)},render:{html:e(48),canvas:e(78)},aa:e(79)}},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function(t,n,e){for(var r=!0;r;){var o=t,i=n,u=e;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(u)}var f=Object.getPrototypeOf(o);if(null===f)return;t=f,n=i,e=u,r=!0,a=f=void 0}},a=e(2),c=e(4),f=function(t){function n(){r(this,n),u(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.src="",this.img=null}return o(n,t),i(n,[{key:"setSrc",value:function(t){this.src=t}},{key:"createImageElement",value:function(){this.setImage(document.createElement("img"))}},{key:"setImage",value:function(t){this.img=t}},{key:"onRead",value:function(t,n){var e=this,r=function i(){e.img.removeEventListener("load",i),e.img.removeEventListener("error",o),t(c.fromHTMLImageElement(e.img))},o=function u(){e.img.removeEventListener("load",r),e.img.removeEventListener("error",u),n("ImageReader: Error loading image")};this.img.addEventListener("load",r),this.img.addEventListener("error",o),this.img.complete&&this.img.naturalWidth?r():this.src&&(this.img.src=this.src)}}],[{key:"fromURL",value:function(t){var e=new n;return e.setSrc(t),e.createImageElement(),e.read()}},{key:"fromImg",value:function(t){var e=new n;return e.setImage(t),e.read()}}]),n}(a);t.exports=f},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=e(3),u=function(){function t(){r(this,t),this.stream=new i}return o(t,[{key:"onRead",value:function(t,n){}},{key:"read",value:function(){return this.onRead(this.stream.write.bind(this.stream),this.error.bind(this)),this.stream}},{key:"error",value:function(t){throw this.stream.clear(),t}}]),t}();t.exports=u},function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=function(){function t(){e(this,t),this.clear()}return r(t,[{key:"write",value:function(t){return this.initialData=t,this.ready&&this.sink.length&&this.run(),this}},{key:"run",value:function(){var t=this;return this.data=this.initialData,this.sink.forEach(function(n){t.data=n(t.data)}),this}},{key:"end",value:function(){return this.ready=!0,this.initialData&&this.run(),this}},{key:"pipe",value:function(t){return this.sink.push(t),this}},{key:"clear",value:function(){return this.sink=[],this.data=null,this.initialData=null,this.ready=!1,this}}]),t}();t.exports=o},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=e(5),u=e(32),a=function(){function t(n,e){r(this,t),this.width=n,this.height=e,this.data=[]}return o(t,[{key:"getAt",value:function(t,n){return this.data[t+this.width*n]}},{key:"filter",value:function(t){return i(this.data,t),this}},{key:"toImageData",value:function(){for(var t,n=[],e=0;e<this.data.length;e++)t=this.data[e],n[n.length]=t.r,n[n.length]=t.g,n[n.length]=t.b,n[n.length]=255;return new ImageData(new Uint8ClampedArray(n),this.width,this.height)}}],[{key:"fromImageData",value:function(n){for(var e=new t(n.width,n.height),r=0,o=n.data.length;o>r;r+=4)e.data.push(new u(n.data[r],n.data[r+1],n.data[r+2]));return e}},{key:"fromHTMLImageElement",value:function(n){var e=document.createElement("canvas"),r=e.getContext("2d");return r.canvas.width=n.naturalWidth,r.canvas.height=n.naturalHeight,r.drawImage(n,0,0),t.fromImageData(r.getImageData(0,0,n.naturalWidth,n.naturalHeight))}}]),t}();t.exports=a},function(t,n,e){t.exports=e(6)},function(t,n,e){var r=e(7),o=e(8),i=e(29),u=i(r,o);t.exports=u},function(t,n){function e(t,n){for(var e=-1,r=t.length;++e<r&&n(t[e],e,t)!==!1;);return t}t.exports=e},function(t,n,e){var r=e(9),o=e(28),i=o(r);t.exports=i},function(t,n,e){function r(t,n){return o(t,n,i)}var o=e(10),i=e(14);t.exports=r},function(t,n,e){var r=e(11),o=r();t.exports=o},function(t,n,e){function r(t){return function(n,e,r){for(var i=o(n),u=r(n),a=u.length,c=t?a:-1;t?c--:++c<a;){var f=u[c];if(e(i[f],f,i)===!1)break}return n}}var o=e(12);t.exports=r},function(t,n,e){function r(t){return o(t)?t:Object(t)}var o=e(13);t.exports=r},function(t,n){function e(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}t.exports=e},function(t,n,e){var r=e(15),o=e(19),i=e(13),u=e(23),a=r(Object,"keys"),c=a?function(t){var n=null==t?void 0:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&o(t)?u(t):i(t)?a(t):[]}:u;t.exports=c},function(t,n,e){function r(t,n){var e=null==t?void 0:t[n];return o(e)?e:void 0}var o=e(16);t.exports=r},function(t,n,e){function r(t){return null==t?!1:o(t)?s.test(c.call(t)):i(t)&&u.test(t)}var o=e(17),i=e(18),u=/^\[object .+?Constructor\]$/,a=Object.prototype,c=Function.prototype.toString,f=a.hasOwnProperty,s=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,n,e){function r(t){return o(t)&&a.call(t)==i}var o=e(13),i="[object Function]",u=Object.prototype,a=u.toString;t.exports=r},function(t,n){function e(t){return!!t&&"object"==typeof t}t.exports=e},function(t,n,e){function r(t){return null!=t&&i(o(t))}var o=e(20),i=e(22);t.exports=r},function(t,n,e){var r=e(21),o=r("length");t.exports=o},function(t,n){function e(t){return function(n){return null==n?void 0:n[t]}}t.exports=e},function(t,n){function e(t){return"number"==typeof t&&t>-1&&t%1==0&&r>=t}var r=9007199254740991;t.exports=e},function(t,n,e){function r(t){for(var n=c(t),e=n.length,r=e&&t.length,f=!!r&&a(r)&&(i(t)||o(t)),l=-1,h=[];++l<e;){var p=n[l];(f&&u(p,r)||s.call(t,p))&&h.push(p)}return h}var o=e(24),i=e(25),u=e(26),a=e(22),c=e(27),f=Object.prototype,s=f.hasOwnProperty;t.exports=r},function(t,n,e){function r(t){return i(t)&&o(t)&&a.call(t,"callee")&&!c.call(t,"callee")}var o=e(19),i=e(18),u=Object.prototype,a=u.hasOwnProperty,c=u.propertyIsEnumerable;t.exports=r},function(t,n,e){var r=e(15),o=e(22),i=e(18),u="[object Array]",a=Object.prototype,c=a.toString,f=r(Array,"isArray"),s=f||function(t){return i(t)&&o(t.length)&&c.call(t)==u};t.exports=s},function(t,n){function e(t,n){return t="number"==typeof t||r.test(t)?+t:-1,n=null==n?o:n,t>-1&&t%1==0&&n>t}var r=/^\d+$/,o=9007199254740991;t.exports=e},function(t,n,e){function r(t){if(null==t)return[];c(t)||(t=Object(t));var n=t.length;n=n&&a(n)&&(i(t)||o(t))&&n||0;for(var e=t.constructor,r=-1,f="function"==typeof e&&e.prototype===t,l=Array(n),h=n>0;++r<n;)l[r]=r+"";for(var p in t)h&&u(p,n)||"constructor"==p&&(f||!s.call(t,p))||l.push(p);return l}var o=e(24),i=e(25),u=e(26),a=e(22),c=e(13),f=Object.prototype,s=f.hasOwnProperty;t.exports=r},function(t,n,e){function r(t,n){return function(e,r){var a=e?o(e):0;if(!i(a))return t(e,r);for(var c=n?a:-1,f=u(e);(n?c--:++c<a)&&r(f[c],c,f)!==!1;);return e}}var o=e(20),i=e(22),u=e(12);t.exports=r},function(t,n,e){function r(t,n){return function(e,r,u){return"function"==typeof r&&void 0===u&&i(e)?t(e,r):n(e,o(r,u,3))}}var o=e(30),i=e(25);t.exports=r},function(t,n,e){function r(t,n,e){if("function"!=typeof t)return o;if(void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 3:return function(e,r,o){return t.call(n,e,r,o)};case 4:return function(e,r,o,i){return t.call(n,e,r,o,i)};case 5:return function(e,r,o,i,u){return t.call(n,e,r,o,i,u)}}return function(){return t.apply(n,arguments)}}var o=e(31);t.exports=r},function(t,n){function e(t){return t}t.exports=e},function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t){return Math.min(Math.max(t,0),255)}var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=function(){function t(n,r,o){e(this,t),this.r=n||0,this.g=r||0,this.b=o||0}return o(t,[{key:"mul",value:function(t){return this.r=~~(this.r*t),this.g=~~(this.g*t),this.b=~~(this.b*t),this}},{key:"add",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this}},{key:"addc",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"div",value:function(t){return this.mul(1/t)}},{key:"inverse",value:function(){return this.r=255-this.r,this.g=255-this.g,this.b=255-this.b,this}},{key:"getGrayscale",value:function(){return Math.floor((this.r+this.g+this.b)/3)}},{key:"clamp",value:function(){return this.r=r(this.r),this.g=r(this.g),this.b=r(this.b),this}}]),t}();t.exports=i},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function(t,n,e){for(var r=!0;r;){var o=t,i=n,u=e;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(u)}var f=Object.getPrototypeOf(o);if(null===f)return;t=f,n=i,e=u,r=!0,a=f=void 0}},a=e(2),c=e(4),f=e(34),s=function(t){function n(t){r(this,n),u(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.options=f(t||{},{autoplay:!1}),this.src="",this.video=null,this.capturer=new l,this.loop=this.loop.bind(this)}return o(n,t),i(n,[{key:"setSrc",value:function(t){this.src=t,this.video&&(this.video.src=this.src)}},{key:"createVideoElement",value:function(){this.setVideo(document.createElement("video"))}},{key:"setVideo",value:function(t){this.video=t,this.options.autoplay&&(this.video.autoplay=!0)}},{key:"onRead",value:function(t,n){var e=this;this.video.addEventListener("error",function(){e.video.removeEventListener("play",e.loop),n("Can't play video: "+e.video.src)}),this.video.addEventListener("play",this.loop)}},{key:"loop",value:function(){this.video.paused||this.video.ended||(this.stream.write(c.fromImageData(this.capturer.captureFrame(this.video))),setTimeout(this.loop,0))}}],[{key:"fromURL",value:function(t,e){var r=new n(e);return r.createVideoElement(),r.setSrc(t),r.read()}},{key:"fromVideoElement",value:function(t,e){var r=new n(e);return r.setVideo(t),r.read()}}]),n}(a),l=function(){function t(){r(this,t),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}return i(t,[{key:"captureFrame",value:function(t){var n=t.videoWidth,e=t.videoHeight;return this.canvas.width=n,this.canvas.height=e,this.ctx.drawImage(t,0,0,n,e),this.ctx.getImageData(0,0,n,e)}}]),t}();t.exports=s},function(t,n,e){var r=e(35),o=e(42),i=e(43),u=i(r,o);t.exports=u},function(t,n,e){var r=e(36),o=e(37),i=e(39),u=i(function(t,n,e){return e?r(t,n,e):o(t,n)});t.exports=u},function(t,n,e){function r(t,n,e){for(var r=-1,i=o(n),u=i.length;++r<u;){var a=i[r],c=t[a],f=e(c,n[a],a,t,n);(f===f?f===c:c!==c)&&(void 0!==c||a in t)||(t[a]=f)}return t}var o=e(14);t.exports=r},function(t,n,e){function r(t,n){return null==n?t:o(n,i(n),t)}var o=e(38),i=e(14);t.exports=r},function(t,n){function e(t,n,e){e||(e={});for(var r=-1,o=n.length;++r<o;){var i=n[r];e[i]=t[i]}return e}t.exports=e},function(t,n,e){function r(t){return u(function(n,e){var r=-1,u=null==n?0:e.length,a=u>2?e[u-2]:void 0,c=u>2?e[2]:void 0,f=u>1?e[u-1]:void 0;for("function"==typeof a?(a=o(a,f,5),u-=2):(a="function"==typeof f?f:void 0,u-=a?1:0),c&&i(e[0],e[1],c)&&(a=3>u?void 0:a,u=1);++r<u;){var s=e[r];s&&t(n,s,a)}return n})}var o=e(30),i=e(40),u=e(41);t.exports=r},function(t,n,e){function r(t,n,e){if(!u(e))return!1;var r=typeof n;if("number"==r?o(e)&&i(n,e.length):"string"==r&&n in e){var a=e[n];return t===t?t===a:a!==a}return!1}var o=e(19),i=e(26),u=e(13);t.exports=r},function(t,n){function e(t,n){if("function"!=typeof t)throw new TypeError(r);return n=o(void 0===n?t.length-1:+n||0,0),function(){for(var e=arguments,r=-1,i=o(e.length-n,0),u=Array(i);++r<i;)u[r]=e[n+r];switch(n){case 0:return t.call(this,u);case 1:return t.call(this,e[0],u);case 2:return t.call(this,e[0],e[1],u)}var a=Array(n+1);for(r=-1;++r<n;)a[r]=e[r];return a[n]=u,t.apply(this,a)}}var r="Expected a function",o=Math.max;t.exports=e},function(t,n){function e(t,n){return void 0===t?n:t}t.exports=e},function(t,n,e){function r(t,n){return o(function(e){var r=e[0];return null==r?r:(e.push(n),t.apply(void 0,e))})}var o=e(41);t.exports=r},function(t,n){"use strict";function e(t,n,e){return t.filter(function(t){return t.mul(n).add(e).clamp()})}function r(t,n){return function(r){return e(r,t,n)}}t.exports=r},function(t,n,e){"use strict";function r(t,n){return i(1,n||0)(t)}function o(t){return function(n){return r(n,t)}}var i=e(44);t.exports=o},function(t,n,e){"use strict";function r(t,n){return i(n||1,0)(t)}function o(t){return function(n){return r(n,t)}}var i=e(44);t.exports=o},function(t,n){"use strict";function e(t){return t.filter(function(t){return t.inverse().clamp()})}function r(){return function(t){return e(t)}}t.exports=r},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}function i(t,n){for(var e="",r=0;r<t.length;r++)r>0&&r%n===0&&(e+="\n"),e+=t[r]["char"];return e}function u(t){var n=new h(t);return function(t){return n.render(t)}}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),c=function(t,n,e){for(var r=!0;r;){var o=t,i=n,u=e;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(u)}var f=Object.getPrototypeOf(o);if(null===f)return;t=f,n=i,e=u,r=!0,a=f=void 0}},f=e(34),s=e(49),l=e(51),h=function(t){function n(t){r(this,n),c(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,f(t||{},{tagName:"pre"})),this.el=this.options.el||document.createElement(this.options.tagName),this.el.style.fontFamily=this.options.fontFamily}return o(n,t),a(n,[{key:"render",value:function(t){c(Object.getPrototypeOf(n.prototype),"render",this).call(this,t),t.colorful&&this.colorize(t.data);var e=i(t.data,t.width);return t.colorful?this.el.innerHTML=e:this.el.textContent=e,this.el}},{key:"colorize",value:function(t){return l(t,function(t){return t["char"]='<span style="color: rgb('+t.r+", "+t.g+", "+t.b+')">'+t["char"]+"</span>",t})}}]),n}(s);u.CHARSET=s.CHARSET,u.Class=h,t.exports=u},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t){return t._cache=[],function(n){return t._cache[n]||(t._cache[n]=t(n))}}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=e(34),a=e(50),c=e(51),f=e(76),s=c(a(32,127),function(t){return String.fromCharCode(t)}),l=[".",":","*","I","$","V","F","N","M"],h=function(){function t(n){r(this,t),this.options=u(n||{},{charset:s,fontFamily:"monospace"}),this.fontmap=t.buildFont(this.options.charset,{fontFamily:this.options.fontFamily}),this.matchChar=o(this.matchChar.bind(this))}return i(t,[{key:"render",value:function(t){return this.processImage(t)}},{key:"processImage",value:function(t){for(var n=0;n<t.data.length;n++)t.data[n]["char"]=this.matchChar(t.data[n].intensity);return t}},{key:"matchChar",value:function(t){var n=this.fontmap[0];if(n[0]===t)return n[0];for(var e=0;e<this.fontmap.length;e++){var r=this.fontmap[e];Math.abs(t-r[1])<Math.abs(t-n[1])&&(n=r)}return n[0]}}],[{key:"buildFont",value:function(t,n){return f(t,n)}}]),t}();h.CHARSET={ASCII:s,SIMPLE:l},t.exports=h},function(t,n,e){function r(t,n,e){e&&o(t,n,e)&&(n=e=void 0),t=+t||0,e=null==e?1:+e||0,null==n?(n=t,t=0):n=+n||0;for(var r=-1,a=u(i((n-t)/(e||1)),0),c=Array(a);++r<a;)c[r]=t,t+=e;return c}var o=e(40),i=Math.ceil,u=Math.max;t.exports=r},function(t,n,e){function r(t,n,e){var r=a(t)?o:u;return n=i(n,e,3),r(t,n)}var o=e(52),i=e(53),u=e(75),a=e(25);t.exports=r},function(t,n){function e(t,n){for(var e=-1,r=t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}t.exports=e},function(t,n,e){function r(t,n,e){var r=typeof t;return"function"==r?void 0===n?t:u(t,n,e):null==t?a:"object"==r?o(t):void 0===n?c(t):i(t,n)}var o=e(54),i=e(66),u=e(30),a=e(31),c=e(73);t.exports=r},function(t,n,e){function r(t){var n=i(t);if(1==n.length&&n[0][2]){var e=n[0][0],r=n[0][1];return function(t){return null==t?!1:t[e]===r&&(void 0!==r||e in u(t))}}return function(t){return o(t,n)}}var o=e(55),i=e(63),u=e(12);t.exports=r},function(t,n,e){function r(t,n,e){var r=n.length,u=r,a=!e;if(null==t)return!u;for(t=i(t);r--;){var c=n[r];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++r<u;){c=n[r];var f=c[0],s=t[f],l=c[1];if(a&&c[2]){if(void 0===s&&!(f in t))return!1}else{var h=e?e(s,l,f):void 0;if(!(void 0===h?o(l,s,e,!0):h))return!1}}return!0}var o=e(56),i=e(12);t.exports=r},function(t,n,e){function r(t,n,e,a,c,f){return t===n?!0:null==t||null==n||!i(t)&&!u(n)?t!==t&&n!==n:o(t,n,r,e,a,c,f)}var o=e(57),i=e(13),u=e(18);t.exports=r},function(t,n,e){function r(t,n,e,r,h,y,d){var g=a(t),b=a(n),m=s,x=s;g||(m=v.call(t),m==f?m=l:m!=l&&(g=c(t))),b||(x=v.call(n),x==f?x=l:x!=l&&(b=c(n)));var w=m==l,j=x==l,O=m==x;if(O&&!g&&!w)return i(t,n,m);if(!h){var k=w&&p.call(t,"__wrapped__"),E=j&&p.call(n,"__wrapped__");if(k||E)return e(k?t.value():t,E?n.value():n,r,h,y,d)}if(!O)return!1;y||(y=[]),d||(d=[]);for(var P=y.length;P--;)if(y[P]==t)return d[P]==n;y.push(t),d.push(n);var C=(g?o:u)(t,n,e,r,h,y,d);return y.pop(),d.pop(),C}var o=e(58),i=e(60),u=e(61),a=e(25),c=e(62),f="[object Arguments]",s="[object Array]",l="[object Object]",h=Object.prototype,p=h.hasOwnProperty,v=h.toString;t.exports=r},function(t,n,e){function r(t,n,e,r,i,u,a){var c=-1,f=t.length,s=n.length;if(f!=s&&!(i&&s>f))return!1;for(;++c<f;){var l=t[c],h=n[c],p=r?r(i?h:l,i?l:h,c):void 0;if(void 0!==p){if(p)continue;return!1}if(i){if(!o(n,function(t){return l===t||e(l,t,r,i,u,a)}))return!1}else if(l!==h&&!e(l,h,r,i,u,a))return!1}return!0}var o=e(59);t.exports=r},function(t,n){function e(t,n){for(var e=-1,r=t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}t.exports=e},function(t,n){function e(t,n,e){switch(e){case r:case o:return+t==+n;case i:return t.name==n.name&&t.message==n.message;case u:return t!=+t?n!=+n:t==+n;case a:case c:return t==n+""}return!1}var r="[object Boolean]",o="[object Date]",i="[object Error]",u="[object Number]",a="[object RegExp]",c="[object String]";t.exports=e},function(t,n,e){function r(t,n,e,r,i,a,c){var f=o(t),s=f.length,l=o(n),h=l.length;if(s!=h&&!i)return!1;for(var p=s;p--;){var v=f[p];if(!(i?v in n:u.call(n,v)))return!1}for(var y=i;++p<s;){v=f[p];var d=t[v],g=n[v],b=r?r(i?g:d,i?d:g,v):void 0;if(!(void 0===b?e(d,g,r,i,a,c):b))return!1;y||(y="constructor"==v)}if(!y){var m=t.constructor,x=n.constructor;if(m!=x&&"constructor"in t&&"constructor"in n&&!("function"==typeof m&&m instanceof m&&"function"==typeof x&&x instanceof x))return!1}return!0}var o=e(14),i=Object.prototype,u=i.hasOwnProperty;t.exports=r},function(t,n,e){function r(t){return i(t)&&o(t.length)&&!!S[I.call(t)]}var o=e(22),i=e(18),u="[object Arguments]",a="[object Array]",c="[object Boolean]",f="[object Date]",s="[object Error]",l="[object Function]",h="[object Map]",p="[object Number]",v="[object Object]",y="[object RegExp]",d="[object Set]",g="[object String]",b="[object WeakMap]",m="[object ArrayBuffer]",x="[object Float32Array]",w="[object Float64Array]",j="[object Int8Array]",O="[object Int16Array]",k="[object Int32Array]",E="[object Uint8Array]",P="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",S={};S[x]=S[w]=S[j]=S[O]=S[k]=S[E]=S[P]=S[C]=S[A]=!0,S[u]=S[a]=S[m]=S[c]=S[f]=S[s]=S[l]=S[h]=S[p]=S[v]=S[y]=S[d]=S[g]=S[b]=!1;var _=Object.prototype,I=_.toString;t.exports=r},function(t,n,e){function r(t){for(var n=i(t),e=n.length;e--;)n[e][2]=o(n[e][1]);return n}var o=e(64),i=e(65);t.exports=r},function(t,n,e){function r(t){return t===t&&!o(t)}var o=e(13);t.exports=r},function(t,n,e){function r(t){t=i(t);for(var n=-1,e=o(t),r=e.length,u=Array(r);++n<r;){var a=e[n];u[n]=[a,t[a]]}return u}var o=e(14),i=e(12);t.exports=r},function(t,n,e){function r(t,n){var e=a(t),r=c(t)&&f(n),p=t+"";return t=h(t),function(a){if(null==a)return!1;var c=p;if(a=l(a),(e||!r)&&!(c in a)){if(a=1==t.length?a:o(a,u(t,0,-1)),null==a)return!1;c=s(t),a=l(a)}return a[c]===n?void 0!==n||c in a:i(n,a[c],void 0,!0)}}var o=e(67),i=e(56),u=e(68),a=e(25),c=e(69),f=e(64),s=e(70),l=e(12),h=e(71);t.exports=r},function(t,n,e){function r(t,n,e){if(null!=t){void 0!==e&&e in o(t)&&(n=[e]);for(var r=0,i=n.length;null!=t&&i>r;)t=t[n[r++]];return r&&r==i?t:void 0}}var o=e(12);t.exports=r},function(t,n){function e(t,n,e){var r=-1,o=t.length;n=null==n?0:+n||0,0>n&&(n=-n>o?0:o+n),e=void 0===e||e>o?o:+e||0,0>e&&(e+=o),o=n>e?0:e-n>>>0,n>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+n];return i}t.exports=e},function(t,n,e){function r(t,n){var e=typeof t;if("string"==e&&a.test(t)||"number"==e)return!0;if(o(t))return!1;var r=!u.test(t);return r||null!=n&&t in i(n)}var o=e(25),i=e(12),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=r},function(t,n){function e(t){var n=t?t.length:0;return n?t[n-1]:void 0}t.exports=e},function(t,n,e){function r(t){if(i(t))return t;var n=[];return o(t).replace(u,function(t,e,r,o){n.push(r?o.replace(a,"$1"):e||t)}),n}var o=e(72),i=e(25),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;t.exports=r},function(t,n){function e(t){return null==t?"":t+""}t.exports=e},function(t,n,e){function r(t){return u(t)?o(t):i(t)}var o=e(21),i=e(74),u=e(69);t.exports=r},function(t,n,e){function r(t){var n=t+"";return t=i(t),function(e){return o(e,t,n)}}var o=e(67),i=e(71);t.exports=r},function(t,n,e){function r(t,n){var e=-1,r=i(t)?Array(t.length):[];return o(t,function(t,o,i){r[++e]=n(t,o,i)}),r}var o=e(8),i=e(19);t.exports=r},function(t,n,e){"use strict";function r(t,n){var e=[],r=255,i=0;return a(t,function(t){var u=o(t,n);r>u&&(r=u),u>i&&(i=u),e.push([t,u])}),e=c(e,function(t){return[t[0],Math.floor(u.mapRange(t[1],r,i,0,255))]}),e=e.sort(function(t,n){return t[1]<n[1]?-1:t[1]>n[1]?1:0})}function o(t,n){for(var e,r,o,u=i(t,n),a=u.getContext("2d"),c=0,f=a.getImageData(0,0,u.width,u.height),s=0;s<f.data.length;s+=4)e=f.data[s],r=f.data[s+1],o=f.data[s+2],c+=(e+r+o)/3;return c/=u.width*u.height}function i(t,n){var e=document.createElement("canvas"),r=e.getContext("2d",{alpha:!1}),o=n&&n.fontFamily||"monospace";return e.width=15,e.height=25,r.fillStyle="#fff",r.fillRect(0,0,e.width,e.height),r.fillStyle="#000",r.textBaseline="top",r.textAlign="left",r.font="20px "+o,r.fillText(t,0,0),e}var u=e(77),a=e(5),c=e(51);t.exports=r},function(t,n){"use strict";t.exports={mapRange:function(t,n,e,r,o){return r+(o-r)/(e-n)*(t-n)},getRGB:function(t,n,e){var r=e*(t.width<<2)+(n<<2);return{r:t.data[r],g:t.data[r+1],b:t.data[r+2]}},trunc:function(t){return t>255?255:0>t?0:t}}},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}function i(t){var n=new s(t);return function(t){return n.render(t)}}var u=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=function(t,n,e){for(var r=!0;r;){var o=t,i=n,u=e;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(u)}var f=Object.getPrototypeOf(o);if(null===f)return;t=f,n=i,e=u,r=!0,a=f=void 0}},c=e(34),f=e(49),s=function(t){function n(t){r(this,n),a(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,c(t||{},{fontSize:7,lineHeight:7,width:400,height:300})),this.el=this.options.el||document.createElement("canvas"),this.el.width=this.options.width,this.el.height=this.options.height,this.ctx=this.el.getContext("2d"),this.ctx.fillStyle="#000",this.ctx.textBaseline="top",this.ctx.textAlign="start",this.ctx.font=this.options.fontSize+"px "+this.options.fontFamily}return o(n,t),u(n,[{key:"render",value:function(t){return a(Object.getPrototypeOf(n.prototype),"render",this).call(this,t),t.colorful?this.renderColorful(t):this.renderMonochrome(t),this.el}},{key:"renderColorful",value:function(t){var n,e,r,o=this.options.lineHeight;this.clearCanvas();for(var i=0;i<t.data.length;i++)n=i%t.width,e=~~(i/t.width),r=t.data[i],this.ctx.fillStyle="rgb("+r.r+", "+r.g+", "+r.b+")",this.ctx.fillText(t.data[i]["char"],4.2*n,e*o)}},{key:"renderMonochrome",value:function(t){var n,e,r=this.options.lineHeight;this.clearCanvas();for(var o=0;o<t.data.length;o+=t.width)n=~~(o/t.width),e=t.data.slice(o,o+t.width).map(function(t){return t["char"]}).join(""),this.ctx.fillText(e,0,n*r)}},{key:"clearCanvas",value:function(){this.ctx.clearRect(0,0,this.el.width,this.el.height)}}]),n}(f);i.CHARSET=f.CHARSET,i.Class=s,t.exports=i},function(t,n,e){"use strict";function r(t,n){for(var e=n.width,r=n.height,u=n.colorful,a=t.width/e,c=t.height/r,s=255,h=0,p=new f(e,r),v=0;r>v;v++)for(var y=0;e>y;y++)l=o(t,~~(y*a),~~(v*c),a,c),l.intensity>h&&(h=l.intensity),l.intensity<s&&(s=l.intensity),p.data.push(l);return i(p,s,h),p.colorful=u,p}function o(t,n,e,r,o){for(var i,u=0,f=new a,s=0;o>s;s++)for(var l=0;r>l;l++)i=t.getAt(n+l,e+s),f.addc(i),u++;return f.div(u),new c(f.r,f.g,f.b,f.getGrayscale())}function i(t,n,e){t.filter(function(t){t.intensity=~~s.mapRange(t.intensity,n,e,0,255)})}function u(t){return function(n){return r(n,t)}}var a=e(32),c=e(80),f=e(4),s=e(77),l={};t.exports=u},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function(t,n,e){for(var r=!0;r;){var o=t,i=n,u=e;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(u)}var f=Object.getPrototypeOf(o);if(null===f)return;t=f,n=i,e=u,r=!0,a=f=void 0}},a=e(32),c=function(t){function n(t,e,o,i){r(this,n),u(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,t,e,o),this.intensity=i||0}return o(n,t),i(n,[{key:"mul",value:function(t){return this.intensity=~~(this.intensity*t),this}},{key:"add",value:function(t){return this.intensity+=t,this}},{key:"div",value:function(t){return this.mul(1/t)}},{key:"inverse",value:function(){return this.intensity=255-this.intensity,this}},{key:"clamp",value:function(){return this.intensity=Math.min(Math.max(this.intensity,0),255),this}}]),n}(a);t.exports=c}])});
//# sourceMappingURL=aalib.js.map